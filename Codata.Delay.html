<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Delay</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- The Delay type and some operations</a>
<a id="144" class="Comment">------------------------------------------------------------------------</a>

<a id="218" class="Keyword">module</a> <a id="225" href="Codata.Delay.html" class="Module">Codata.Delay</a> <a id="238" class="Keyword">where</a>

<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="Size.html" class="Module">Size</a>
<a id="262" class="Keyword">open</a> <a id="267" class="Keyword">import</a> <a id="274" href="Codata.Thunk.html" class="Module">Codata.Thunk</a>
<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="Codata.Conat.html" class="Module">Codata.Conat</a> <a id="312" class="Keyword">hiding</a> <a id="319" class="Symbol">(</a><a id="320" href="Codata.Conat.html#1977" class="Function">extract</a><a id="327" class="Symbol">)</a>

<a id="330" class="Keyword">open</a> <a id="335" class="Keyword">import</a> <a id="342" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="353" class="Keyword">open</a> <a id="358" class="Keyword">import</a> <a id="365" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="436" class="Keyword">hiding</a> <a id="443" class="Symbol">(</a><a id="444" href="Data.Maybe.Base.html#2071" class="Function">map</a> <a id="448" class="Symbol">;</a> <a id="450" href="Data.Maybe.Base.html#1662" class="Function">fromMaybe</a><a id="459" class="Symbol">)</a>
<a id="461" class="Keyword">open</a> <a id="466" class="Keyword">import</a> <a id="473" href="Data.Product.html" class="Module">Data.Product</a> <a id="486" class="Symbol">as</a> <a id="489" class="Module">P</a> <a id="491" class="Keyword">hiding</a> <a id="498" class="Symbol">(</a><a id="499" href="Data.Product.html#2154" class="Function">map</a><a id="502" class="Symbol">)</a>
<a id="504" class="Keyword">open</a> <a id="509" class="Keyword">import</a> <a id="516" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="525" class="Symbol">as</a> <a id="528" class="Module">S</a> <a id="530" class="Keyword">hiding</a> <a id="537" class="Symbol">(</a><a id="538" href="Data.Sum.Base.html#1143" class="Function">map</a><a id="541" class="Symbol">)</a>

<a id="544" class="Comment">------------------------------------------------------------------------</a>
<a id="617" class="Comment">-- Definition</a>

<a id="632" class="Keyword">data</a> <a id="Delay"></a><a id="637" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="643" class="Symbol">{</a><a id="644" href="Codata.Delay.html#644" class="Bound">ℓ</a><a id="645" class="Symbol">}</a> <a id="647" class="Symbol">(</a><a id="648" href="Codata.Delay.html#648" class="Bound">A</a> <a id="650" class="Symbol">:</a> <a id="652" class="PrimitiveType">Set</a> <a id="656" href="Codata.Delay.html#644" class="Bound">ℓ</a><a id="657" class="Symbol">)</a> <a id="659" class="Symbol">(</a><a id="660" href="Codata.Delay.html#660" class="Bound">i</a> <a id="662" class="Symbol">:</a> <a id="664" href="Agda.Builtin.Size.html#114" class="Postulate">Size</a><a id="668" class="Symbol">)</a> <a id="670" class="Symbol">:</a> <a id="672" class="PrimitiveType">Set</a> <a id="676" href="Codata.Delay.html#644" class="Bound">ℓ</a> <a id="678" class="Keyword">where</a>
  <a id="Delay.now"></a><a id="686" href="Codata.Delay.html#686" class="InductiveConstructor">now</a>   <a id="692" class="Symbol">:</a> <a id="694" href="Codata.Delay.html#648" class="Bound">A</a> <a id="696" class="Symbol">→</a> <a id="698" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="704" href="Codata.Delay.html#648" class="Bound">A</a> <a id="706" href="Codata.Delay.html#660" class="Bound">i</a>
  <a id="Delay.later"></a><a id="710" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="716" class="Symbol">:</a> <a id="718" href="Codata.Thunk.html#301" class="Record">Thunk</a> <a id="724" class="Symbol">(</a><a id="725" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="731" href="Codata.Delay.html#648" class="Bound">A</a><a id="732" class="Symbol">)</a> <a id="734" href="Codata.Delay.html#660" class="Bound">i</a> <a id="736" class="Symbol">→</a> <a id="738" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="744" href="Codata.Delay.html#648" class="Bound">A</a> <a id="746" href="Codata.Delay.html#660" class="Bound">i</a>

<a id="749" class="Keyword">module</a> <a id="756" href="Codata.Delay.html#756" class="Module">_</a> <a id="758" class="Symbol">{</a><a id="759" href="Codata.Delay.html#759" class="Bound">ℓ</a><a id="760" class="Symbol">}</a> <a id="762" class="Symbol">{</a><a id="763" href="Codata.Delay.html#763" class="Bound">A</a> <a id="765" class="Symbol">:</a> <a id="767" class="PrimitiveType">Set</a> <a id="771" href="Codata.Delay.html#759" class="Bound">ℓ</a><a id="772" class="Symbol">}</a> <a id="774" class="Keyword">where</a>

 <a id="782" href="Codata.Delay.html#782" class="Function">length</a> <a id="789" class="Symbol">:</a> <a id="791" class="Symbol">∀</a> <a id="793" class="Symbol">{</a><a id="794" href="Codata.Delay.html#794" class="Bound">i</a><a id="795" class="Symbol">}</a> <a id="797" class="Symbol">→</a> <a id="799" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="805" href="Codata.Delay.html#763" class="Bound">A</a> <a id="807" href="Codata.Delay.html#794" class="Bound">i</a> <a id="809" class="Symbol">→</a> <a id="811" href="Codata.Conat.html#477" class="Datatype">Conat</a> <a id="817" href="Codata.Delay.html#794" class="Bound">i</a>
 <a id="820" href="Codata.Delay.html#782" class="Function">length</a> <a id="827" class="Symbol">(</a><a id="828" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="832" class="Symbol">_)</a>   <a id="837" class="Symbol">=</a> <a id="839" href="Codata.Conat.html#508" class="InductiveConstructor">zero</a>
 <a id="845" href="Codata.Delay.html#782" class="Function">length</a> <a id="852" class="Symbol">(</a><a id="853" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="859" href="Codata.Delay.html#859" class="Bound">d</a><a id="860" class="Symbol">)</a> <a id="862" class="Symbol">=</a> <a id="864" href="Codata.Conat.html#525" class="InductiveConstructor">suc</a> <a id="868" class="Symbol">λ</a> <a id="870" class="Keyword">where</a> <a id="876" class="Symbol">.</a><a id="877" href="Codata.Thunk.html#377" class="Field">force</a> <a id="883" class="Symbol">→</a> <a id="885" href="Codata.Delay.html#782" class="Function">length</a> <a id="892" class="Symbol">(</a><a id="893" href="Codata.Delay.html#859" class="Bound">d</a> <a id="895" class="Symbol">.</a><a id="896" href="Codata.Thunk.html#377" class="Field">force</a><a id="901" class="Symbol">)</a>

 <a id="905" href="Codata.Delay.html#905" class="Function">never</a> <a id="911" class="Symbol">:</a> <a id="913" class="Symbol">∀</a> <a id="915" class="Symbol">{</a><a id="916" href="Codata.Delay.html#916" class="Bound">i</a><a id="917" class="Symbol">}</a> <a id="919" class="Symbol">→</a> <a id="921" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="927" href="Codata.Delay.html#763" class="Bound">A</a> <a id="929" href="Codata.Delay.html#916" class="Bound">i</a>
 <a id="932" href="Codata.Delay.html#905" class="Function">never</a> <a id="938" class="Symbol">=</a> <a id="940" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="946" class="Symbol">λ</a> <a id="948" class="Keyword">where</a> <a id="954" class="Symbol">.</a><a id="955" href="Codata.Thunk.html#377" class="Field">force</a> <a id="961" class="Symbol">→</a> <a id="963" href="Codata.Delay.html#905" class="Function">never</a>

 <a id="971" href="Codata.Delay.html#971" class="Function">fromMaybe</a> <a id="981" class="Symbol">:</a> <a id="983" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="989" href="Codata.Delay.html#763" class="Bound">A</a> <a id="991" class="Symbol">→</a> <a id="993" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="999" href="Codata.Delay.html#763" class="Bound">A</a> <a id="1001" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a>
 <a id="1004" href="Codata.Delay.html#971" class="Function">fromMaybe</a> <a id="1014" class="Symbol">=</a> <a id="1016" href="Data.Maybe.Base.html#1352" class="Function">maybe</a> <a id="1022" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="1026" href="Codata.Delay.html#905" class="Function">never</a>

 <a id="1034" href="Codata.Delay.html#1034" class="Function">runFor</a> <a id="1041" class="Symbol">:</a> <a id="1043" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1045" class="Symbol">→</a> <a id="1047" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1053" href="Codata.Delay.html#763" class="Bound">A</a> <a id="1055" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a> <a id="1057" class="Symbol">→</a> <a id="1059" href="Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="1065" href="Codata.Delay.html#763" class="Bound">A</a>
 <a id="1068" href="Codata.Delay.html#1034" class="Function">runFor</a> <a id="1075" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a>    <a id="1083" href="Codata.Delay.html#1083" class="Bound">d</a>         <a id="1093" class="Symbol">=</a> <a id="1095" href="Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a>
 <a id="1104" href="Codata.Delay.html#1034" class="Function">runFor</a> <a id="1111" class="Symbol">(</a><a id="1112" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1116" href="Codata.Delay.html#1116" class="Bound">n</a><a id="1117" class="Symbol">)</a> <a id="1119" class="Symbol">(</a><a id="1120" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="1124" href="Codata.Delay.html#1124" class="Bound">a</a><a id="1125" class="Symbol">)</a>   <a id="1129" class="Symbol">=</a> <a id="1131" href="Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="1136" href="Codata.Delay.html#1124" class="Bound">a</a>
 <a id="1139" href="Codata.Delay.html#1034" class="Function">runFor</a> <a id="1146" class="Symbol">(</a><a id="1147" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1151" href="Codata.Delay.html#1151" class="Bound">n</a><a id="1152" class="Symbol">)</a> <a id="1154" class="Symbol">(</a><a id="1155" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1161" href="Codata.Delay.html#1161" class="Bound">d</a><a id="1162" class="Symbol">)</a> <a id="1164" class="Symbol">=</a> <a id="1166" href="Codata.Delay.html#1034" class="Function">runFor</a> <a id="1173" href="Codata.Delay.html#1151" class="Bound">n</a> <a id="1175" class="Symbol">(</a><a id="1176" href="Codata.Delay.html#1161" class="Bound">d</a> <a id="1178" class="Symbol">.</a><a id="1179" href="Codata.Thunk.html#377" class="Field">force</a><a id="1184" class="Symbol">)</a>

<a id="1187" class="Keyword">module</a> <a id="1194" href="Codata.Delay.html#1194" class="Module">_</a> <a id="1196" class="Symbol">{</a><a id="1197" href="Codata.Delay.html#1197" class="Bound">ℓ</a> <a id="1199" href="Codata.Delay.html#1199" class="Bound">ℓ′</a><a id="1201" class="Symbol">}</a> <a id="1203" class="Symbol">{</a><a id="1204" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1206" class="Symbol">:</a> <a id="1208" class="PrimitiveType">Set</a> <a id="1212" href="Codata.Delay.html#1197" class="Bound">ℓ</a><a id="1213" class="Symbol">}</a> <a id="1215" class="Symbol">{</a><a id="1216" href="Codata.Delay.html#1216" class="Bound">B</a> <a id="1218" class="Symbol">:</a> <a id="1220" class="PrimitiveType">Set</a> <a id="1224" href="Codata.Delay.html#1199" class="Bound">ℓ′</a><a id="1226" class="Symbol">}</a> <a id="1228" class="Keyword">where</a>

 <a id="1236" href="Codata.Delay.html#1236" class="Function">map</a> <a id="1240" class="Symbol">:</a> <a id="1242" class="Symbol">(</a><a id="1243" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1245" class="Symbol">→</a> <a id="1247" href="Codata.Delay.html#1216" class="Bound">B</a><a id="1248" class="Symbol">)</a> <a id="1250" class="Symbol">→</a> <a id="1252" class="Symbol">∀</a> <a id="1254" class="Symbol">{</a><a id="1255" href="Codata.Delay.html#1255" class="Bound">i</a><a id="1256" class="Symbol">}</a> <a id="1258" class="Symbol">→</a> <a id="1260" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1266" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1268" href="Codata.Delay.html#1255" class="Bound">i</a> <a id="1270" class="Symbol">→</a> <a id="1272" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1278" href="Codata.Delay.html#1216" class="Bound">B</a> <a id="1280" href="Codata.Delay.html#1255" class="Bound">i</a>
 <a id="1283" href="Codata.Delay.html#1236" class="Function">map</a> <a id="1287" href="Codata.Delay.html#1287" class="Bound">f</a> <a id="1289" class="Symbol">(</a><a id="1290" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="1294" href="Codata.Delay.html#1294" class="Bound">a</a><a id="1295" class="Symbol">)</a>   <a id="1299" class="Symbol">=</a> <a id="1301" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="1305" class="Symbol">(</a><a id="1306" href="Codata.Delay.html#1287" class="Bound">f</a> <a id="1308" href="Codata.Delay.html#1294" class="Bound">a</a><a id="1309" class="Symbol">)</a>
 <a id="1312" href="Codata.Delay.html#1236" class="Function">map</a> <a id="1316" href="Codata.Delay.html#1316" class="Bound">f</a> <a id="1318" class="Symbol">(</a><a id="1319" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1325" href="Codata.Delay.html#1325" class="Bound">d</a><a id="1326" class="Symbol">)</a> <a id="1328" class="Symbol">=</a> <a id="1330" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1336" class="Symbol">λ</a> <a id="1338" class="Keyword">where</a> <a id="1344" class="Symbol">.</a><a id="1345" href="Codata.Thunk.html#377" class="Field">force</a> <a id="1351" class="Symbol">→</a> <a id="1353" href="Codata.Delay.html#1236" class="Function">map</a> <a id="1357" href="Codata.Delay.html#1316" class="Bound">f</a> <a id="1359" class="Symbol">(</a><a id="1360" href="Codata.Delay.html#1325" class="Bound">d</a> <a id="1362" class="Symbol">.</a><a id="1363" href="Codata.Thunk.html#377" class="Field">force</a><a id="1368" class="Symbol">)</a>

 <a id="1372" href="Codata.Delay.html#1372" class="Function">bind</a> <a id="1377" class="Symbol">:</a> <a id="1379" class="Symbol">∀</a> <a id="1381" class="Symbol">{</a><a id="1382" href="Codata.Delay.html#1382" class="Bound">i</a><a id="1383" class="Symbol">}</a> <a id="1385" class="Symbol">→</a> <a id="1387" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1393" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1395" href="Codata.Delay.html#1382" class="Bound">i</a> <a id="1397" class="Symbol">→</a> <a id="1399" class="Symbol">(</a><a id="1400" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1402" class="Symbol">→</a> <a id="1404" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1410" href="Codata.Delay.html#1216" class="Bound">B</a> <a id="1412" href="Codata.Delay.html#1382" class="Bound">i</a><a id="1413" class="Symbol">)</a> <a id="1415" class="Symbol">→</a> <a id="1417" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1423" href="Codata.Delay.html#1216" class="Bound">B</a> <a id="1425" href="Codata.Delay.html#1382" class="Bound">i</a>
 <a id="1428" href="Codata.Delay.html#1372" class="Function">bind</a> <a id="1433" class="Symbol">(</a><a id="1434" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="1438" href="Codata.Delay.html#1438" class="Bound">a</a><a id="1439" class="Symbol">)</a>   <a id="1443" href="Codata.Delay.html#1443" class="Bound">f</a> <a id="1445" class="Symbol">=</a> <a id="1447" href="Codata.Delay.html#1443" class="Bound">f</a> <a id="1449" href="Codata.Delay.html#1438" class="Bound">a</a>
 <a id="1452" href="Codata.Delay.html#1372" class="Function">bind</a> <a id="1457" class="Symbol">(</a><a id="1458" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1464" href="Codata.Delay.html#1464" class="Bound">d</a><a id="1465" class="Symbol">)</a> <a id="1467" href="Codata.Delay.html#1467" class="Bound">f</a> <a id="1469" class="Symbol">=</a> <a id="1471" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1477" class="Symbol">λ</a> <a id="1479" class="Keyword">where</a> <a id="1485" class="Symbol">.</a><a id="1486" href="Codata.Thunk.html#377" class="Field">force</a> <a id="1492" class="Symbol">→</a> <a id="1494" href="Codata.Delay.html#1372" class="Function">bind</a> <a id="1499" class="Symbol">(</a><a id="1500" href="Codata.Delay.html#1464" class="Bound">d</a> <a id="1502" class="Symbol">.</a><a id="1503" href="Codata.Thunk.html#377" class="Field">force</a><a id="1508" class="Symbol">)</a> <a id="1510" href="Codata.Delay.html#1467" class="Bound">f</a>

 <a id="1514" href="Codata.Delay.html#1514" class="Function">unfold</a> <a id="1521" class="Symbol">:</a> <a id="1523" class="Symbol">(</a><a id="1524" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1526" class="Symbol">→</a> <a id="1528" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1530" href="Data.Sum.Base.html#419" class="Datatype Operator">⊎</a> <a id="1532" href="Codata.Delay.html#1216" class="Bound">B</a><a id="1533" class="Symbol">)</a> <a id="1535" class="Symbol">→</a> <a id="1537" href="Codata.Delay.html#1204" class="Bound">A</a> <a id="1539" class="Symbol">→</a> <a id="1541" class="Symbol">∀</a> <a id="1543" class="Symbol">{</a><a id="1544" href="Codata.Delay.html#1544" class="Bound">i</a><a id="1545" class="Symbol">}</a> <a id="1547" class="Symbol">→</a> <a id="1549" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1555" href="Codata.Delay.html#1216" class="Bound">B</a> <a id="1557" href="Codata.Delay.html#1544" class="Bound">i</a>
 <a id="1560" href="Codata.Delay.html#1514" class="Function">unfold</a> <a id="1567" href="Codata.Delay.html#1567" class="Bound">next</a> <a id="1572" href="Codata.Delay.html#1572" class="Bound">seed</a> <a id="1577" class="Keyword">with</a> <a id="1582" href="Codata.Delay.html#1567" class="Bound">next</a> <a id="1587" href="Codata.Delay.html#1572" class="Bound">seed</a>
 <a id="1593" class="Symbol">...</a> <a id="1597" class="Symbol">|</a> <a id="1599" href="Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="1604" href="Codata.Delay.html#1604" class="Bound">seed′</a> <a id="1610" class="Symbol">=</a> <a id="1612" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1618" class="Symbol">λ</a> <a id="1620" class="Keyword">where</a> <a id="1626" class="Symbol">.</a><a id="1627" href="Codata.Thunk.html#377" class="Field">force</a> <a id="1633" class="Symbol">→</a> <a id="1635" href="Codata.Delay.html#1514" class="Function">unfold</a> <a id="1642" class="Bound">next</a> <a id="1647" href="Codata.Delay.html#1604" class="Bound">seed′</a>
 <a id="1654" class="Symbol">...</a> <a id="1658" class="Symbol">|</a> <a id="1660" href="Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="1665" href="Codata.Delay.html#1665" class="Bound">b</a>     <a id="1671" class="Symbol">=</a> <a id="1673" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="1677" href="Codata.Delay.html#1665" class="Bound">b</a>

<a id="1680" class="Keyword">module</a> <a id="1687" href="Codata.Delay.html#1687" class="Module">_</a> <a id="1689" class="Symbol">{</a><a id="1690" href="Codata.Delay.html#1690" class="Bound">ℓ</a> <a id="1692" href="Codata.Delay.html#1692" class="Bound">ℓ₁</a> <a id="1695" href="Codata.Delay.html#1695" class="Bound">ℓ₂</a><a id="1697" class="Symbol">}</a> <a id="1699" class="Symbol">{</a><a id="1700" href="Codata.Delay.html#1700" class="Bound">A</a> <a id="1702" class="Symbol">:</a> <a id="1704" class="PrimitiveType">Set</a> <a id="1708" href="Codata.Delay.html#1690" class="Bound">ℓ</a><a id="1709" class="Symbol">}</a> <a id="1711" class="Symbol">{</a><a id="1712" href="Codata.Delay.html#1712" class="Bound">B</a> <a id="1714" class="Symbol">:</a> <a id="1716" class="PrimitiveType">Set</a> <a id="1720" href="Codata.Delay.html#1692" class="Bound">ℓ₁</a><a id="1722" class="Symbol">}</a> <a id="1724" class="Symbol">{</a><a id="1725" href="Codata.Delay.html#1725" class="Bound">C</a> <a id="1727" class="Symbol">:</a> <a id="1729" class="PrimitiveType">Set</a> <a id="1733" href="Codata.Delay.html#1695" class="Bound">ℓ₂</a><a id="1735" class="Symbol">}</a> <a id="1737" class="Keyword">where</a>

 <a id="1745" href="Codata.Delay.html#1745" class="Function">zipWith</a> <a id="1753" class="Symbol">:</a> <a id="1755" class="Symbol">(</a><a id="1756" href="Codata.Delay.html#1700" class="Bound">A</a> <a id="1758" class="Symbol">→</a> <a id="1760" href="Codata.Delay.html#1712" class="Bound">B</a> <a id="1762" class="Symbol">→</a> <a id="1764" href="Codata.Delay.html#1725" class="Bound">C</a><a id="1765" class="Symbol">)</a> <a id="1767" class="Symbol">→</a> <a id="1769" class="Symbol">∀</a> <a id="1771" class="Symbol">{</a><a id="1772" href="Codata.Delay.html#1772" class="Bound">i</a><a id="1773" class="Symbol">}</a> <a id="1775" class="Symbol">→</a> <a id="1777" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1783" href="Codata.Delay.html#1700" class="Bound">A</a> <a id="1785" href="Codata.Delay.html#1772" class="Bound">i</a> <a id="1787" class="Symbol">→</a> <a id="1789" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1795" href="Codata.Delay.html#1712" class="Bound">B</a> <a id="1797" href="Codata.Delay.html#1772" class="Bound">i</a> <a id="1799" class="Symbol">→</a> <a id="1801" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="1807" href="Codata.Delay.html#1725" class="Bound">C</a> <a id="1809" href="Codata.Delay.html#1772" class="Bound">i</a>
 <a id="1812" href="Codata.Delay.html#1745" class="Function">zipWith</a> <a id="1820" href="Codata.Delay.html#1820" class="Bound">f</a> <a id="1822" class="Symbol">(</a><a id="1823" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="1827" href="Codata.Delay.html#1827" class="Bound">a</a><a id="1828" class="Symbol">)</a>   <a id="1832" href="Codata.Delay.html#1832" class="Bound">d</a>         <a id="1842" class="Symbol">=</a> <a id="1844" href="Codata.Delay.html#1236" class="Function">map</a> <a id="1848" class="Symbol">(</a><a id="1849" href="Codata.Delay.html#1820" class="Bound">f</a> <a id="1851" href="Codata.Delay.html#1827" class="Bound">a</a><a id="1852" class="Symbol">)</a> <a id="1854" href="Codata.Delay.html#1832" class="Bound">d</a>
 <a id="1857" href="Codata.Delay.html#1745" class="CatchallClause Function">zipWith</a><a id="1864" class="CatchallClause"> </a><a id="1865" href="Codata.Delay.html#1865" class="CatchallClause Bound">f</a><a id="1866" class="CatchallClause"> </a><a id="1867" href="Codata.Delay.html#1867" class="CatchallClause Bound">d</a><a id="1868" class="CatchallClause">         </a><a id="1877" class="CatchallClause Symbol">(</a><a id="1878" href="Codata.Delay.html#686" class="CatchallClause InductiveConstructor">now</a><a id="1881" class="CatchallClause"> </a><a id="1882" href="Codata.Delay.html#1882" class="CatchallClause Bound">b</a><a id="1883" class="CatchallClause Symbol">)</a>   <a id="1887" class="Symbol">=</a> <a id="1889" href="Codata.Delay.html#1236" class="Function">map</a> <a id="1893" class="Symbol">(λ</a> <a id="1896" href="Codata.Delay.html#1896" class="Bound">a</a> <a id="1898" class="Symbol">→</a> <a id="1900" href="Codata.Delay.html#1865" class="Bound">f</a> <a id="1902" href="Codata.Delay.html#1896" class="Bound">a</a> <a id="1904" href="Codata.Delay.html#1882" class="Bound">b</a><a id="1905" class="Symbol">)</a> <a id="1907" href="Codata.Delay.html#1867" class="Bound">d</a>
 <a id="1910" href="Codata.Delay.html#1745" class="Function">zipWith</a> <a id="1918" href="Codata.Delay.html#1918" class="Bound">f</a> <a id="1920" class="Symbol">(</a><a id="1921" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1927" href="Codata.Delay.html#1927" class="Bound">a</a><a id="1928" class="Symbol">)</a> <a id="1930" class="Symbol">(</a><a id="1931" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1937" href="Codata.Delay.html#1937" class="Bound">b</a><a id="1938" class="Symbol">)</a> <a id="1940" class="Symbol">=</a> <a id="1942" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="1948" class="Symbol">λ</a> <a id="1950" class="Keyword">where</a> <a id="1956" class="Symbol">.</a><a id="1957" href="Codata.Thunk.html#377" class="Field">force</a> <a id="1963" class="Symbol">→</a> <a id="1965" href="Codata.Delay.html#1745" class="Function">zipWith</a> <a id="1973" href="Codata.Delay.html#1918" class="Bound">f</a> <a id="1975" class="Symbol">(</a><a id="1976" href="Codata.Delay.html#1927" class="Bound">a</a> <a id="1978" class="Symbol">.</a><a id="1979" href="Codata.Thunk.html#377" class="Field">force</a><a id="1984" class="Symbol">)</a> <a id="1986" class="Symbol">(</a><a id="1987" href="Codata.Delay.html#1937" class="Bound">b</a> <a id="1989" class="Symbol">.</a><a id="1990" href="Codata.Thunk.html#377" class="Field">force</a><a id="1995" class="Symbol">)</a>

<a id="1998" class="Comment">------------------------------------------------------------------------</a>
<a id="2071" class="Comment">-- Finite Delays</a>

<a id="2089" class="Keyword">module</a> <a id="2096" href="Codata.Delay.html#2096" class="Module">_</a> <a id="2098" class="Symbol">{</a><a id="2099" href="Codata.Delay.html#2099" class="Bound">ℓ</a><a id="2100" class="Symbol">}</a> <a id="2102" class="Symbol">{</a><a id="2103" href="Codata.Delay.html#2103" class="Bound">A</a> <a id="2105" class="Symbol">:</a> <a id="2107" class="PrimitiveType">Set</a> <a id="2111" href="Codata.Delay.html#2099" class="Bound">ℓ</a><a id="2112" class="Symbol">}</a> <a id="2114" class="Keyword">where</a>

 <a id="2122" class="Keyword">infix</a> <a id="2128" class="Number">3</a> <a id="2130" href="Codata.Delay.html#2139" class="Datatype Operator">_⇓</a>
 <a id="2134" class="Keyword">data</a> <a id="2139" href="Codata.Delay.html#2139" class="Datatype Operator">_⇓</a> <a id="2142" class="Symbol">:</a> <a id="2144" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="2150" href="Codata.Delay.html#2103" class="Bound">A</a> <a id="2152" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a> <a id="2154" class="Symbol">→</a> <a id="2156" class="PrimitiveType">Set</a> <a id="2160" href="Codata.Delay.html#2099" class="Bound">ℓ</a> <a id="2162" class="Keyword">where</a>
   <a id="2171" href="Codata.Delay.html#2171" class="InductiveConstructor">now</a>   <a id="2177" class="Symbol">:</a> <a id="2179" class="Symbol">∀</a> <a id="2181" href="Codata.Delay.html#2181" class="Bound">a</a> <a id="2183" class="Symbol">→</a> <a id="2185" href="Codata.Delay.html#686" class="InductiveConstructor">now</a> <a id="2189" href="Codata.Delay.html#2181" class="Bound">a</a> <a id="2191" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a>
   <a id="2196" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2202" class="Symbol">:</a> <a id="2204" class="Symbol">∀</a> <a id="2206" class="Symbol">{</a><a id="2207" href="Codata.Delay.html#2207" class="Bound">d</a><a id="2208" class="Symbol">}</a> <a id="2210" class="Symbol">→</a> <a id="2212" href="Codata.Delay.html#2207" class="Bound">d</a> <a id="2214" class="Symbol">.</a><a id="2215" href="Codata.Thunk.html#377" class="Field">force</a> <a id="2221" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a> <a id="2223" class="Symbol">→</a> <a id="2225" href="Codata.Delay.html#710" class="InductiveConstructor">later</a> <a id="2231" href="Codata.Delay.html#2207" class="Bound">d</a> <a id="2233" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a>

 <a id="2237" href="Codata.Delay.html#2237" class="Function">extract</a> <a id="2245" class="Symbol">:</a> <a id="2247" class="Symbol">∀</a> <a id="2249" class="Symbol">{</a><a id="2250" href="Codata.Delay.html#2250" class="Bound">d</a><a id="2251" class="Symbol">}</a> <a id="2253" class="Symbol">→</a> <a id="2255" href="Codata.Delay.html#2250" class="Bound">d</a> <a id="2257" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a> <a id="2259" class="Symbol">→</a> <a id="2261" href="Codata.Delay.html#2103" class="Bound">A</a>
 <a id="2264" href="Codata.Delay.html#2237" class="Function">extract</a> <a id="2272" class="Symbol">(</a><a id="2273" href="Codata.Delay.html#2171" class="InductiveConstructor">now</a> <a id="2277" href="Codata.Delay.html#2277" class="Bound">a</a><a id="2278" class="Symbol">)</a>   <a id="2282" class="Symbol">=</a> <a id="2284" href="Codata.Delay.html#2277" class="Bound">a</a>
 <a id="2287" href="Codata.Delay.html#2237" class="Function">extract</a> <a id="2295" class="Symbol">(</a><a id="2296" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2302" href="Codata.Delay.html#2302" class="Bound">d</a><a id="2303" class="Symbol">)</a> <a id="2305" class="Symbol">=</a> <a id="2307" href="Codata.Delay.html#2237" class="Function">extract</a> <a id="2315" href="Codata.Delay.html#2302" class="Bound">d</a>

 <a id="2319" href="Codata.Delay.html#2319" class="Function">¬never⇓</a> <a id="2327" class="Symbol">:</a> <a id="2329" href="Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="2331" class="Symbol">(</a><a id="2332" href="Codata.Delay.html#905" class="Function">never</a> <a id="2338" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a><a id="2339" class="Symbol">)</a>
 <a id="2342" href="Codata.Delay.html#2319" class="Function">¬never⇓</a> <a id="2350" class="Symbol">(</a><a id="2351" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2357" href="Codata.Delay.html#2357" class="Bound">p</a><a id="2358" class="Symbol">)</a> <a id="2360" class="Symbol">=</a> <a id="2362" href="Codata.Delay.html#2319" class="Function">¬never⇓</a> <a id="2370" href="Codata.Delay.html#2357" class="Bound">p</a>

 <a id="2374" href="Codata.Delay.html#2374" class="Function">length-⇓</a> <a id="2383" class="Symbol">:</a> <a id="2385" class="Symbol">∀</a> <a id="2387" class="Symbol">{</a><a id="2388" href="Codata.Delay.html#2388" class="Bound">d</a><a id="2389" class="Symbol">}</a> <a id="2391" class="Symbol">→</a> <a id="2393" href="Codata.Delay.html#2388" class="Bound">d</a> <a id="2395" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a> <a id="2397" class="Symbol">→</a> <a id="2399" href="Codata.Conat.html#1874" class="Datatype">Finite</a> <a id="2406" class="Symbol">(</a><a id="2407" href="Codata.Delay.html#782" class="Function">length</a> <a id="2414" href="Codata.Delay.html#2388" class="Bound">d</a><a id="2415" class="Symbol">)</a>
 <a id="2418" href="Codata.Delay.html#2374" class="Function">length-⇓</a> <a id="2427" class="Symbol">(</a><a id="2428" href="Codata.Delay.html#2171" class="InductiveConstructor">now</a> <a id="2432" href="Codata.Delay.html#2432" class="Bound">a</a><a id="2433" class="Symbol">)</a>    <a id="2438" class="Symbol">=</a> <a id="2440" href="Codata.Conat.html#1905" class="InductiveConstructor">zero</a>
 <a id="2446" href="Codata.Delay.html#2374" class="Function">length-⇓</a> <a id="2455" class="Symbol">(</a><a id="2456" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2462" href="Codata.Delay.html#2462" class="Bound">d⇓</a><a id="2464" class="Symbol">)</a> <a id="2466" class="Symbol">=</a> <a id="2468" href="Codata.Conat.html#1926" class="InductiveConstructor">suc</a> <a id="2472" class="Symbol">(</a><a id="2473" href="Codata.Delay.html#2374" class="Function">length-⇓</a> <a id="2482" href="Codata.Delay.html#2462" class="Bound">d⇓</a><a id="2484" class="Symbol">)</a>

<a id="2487" class="Keyword">module</a> <a id="2494" href="Codata.Delay.html#2494" class="Module">_</a> <a id="2496" class="Symbol">{</a><a id="2497" href="Codata.Delay.html#2497" class="Bound">ℓ</a> <a id="2499" href="Codata.Delay.html#2499" class="Bound">ℓ′</a><a id="2501" class="Symbol">}</a> <a id="2503" class="Symbol">{</a><a id="2504" href="Codata.Delay.html#2504" class="Bound">A</a> <a id="2506" class="Symbol">:</a> <a id="2508" class="PrimitiveType">Set</a> <a id="2512" href="Codata.Delay.html#2497" class="Bound">ℓ</a><a id="2513" class="Symbol">}</a> <a id="2515" class="Symbol">{</a><a id="2516" href="Codata.Delay.html#2516" class="Bound">B</a> <a id="2518" class="Symbol">:</a> <a id="2520" class="PrimitiveType">Set</a> <a id="2524" href="Codata.Delay.html#2499" class="Bound">ℓ′</a><a id="2526" class="Symbol">}</a> <a id="2528" class="Keyword">where</a>

 <a id="2536" href="Codata.Delay.html#2536" class="Function">map-⇓</a> <a id="2542" class="Symbol">:</a> <a id="2544" class="Symbol">∀</a> <a id="2546" class="Symbol">(</a><a id="2547" href="Codata.Delay.html#2547" class="Bound">f</a> <a id="2549" class="Symbol">:</a> <a id="2551" href="Codata.Delay.html#2504" class="Bound">A</a> <a id="2553" class="Symbol">→</a> <a id="2555" href="Codata.Delay.html#2516" class="Bound">B</a><a id="2556" class="Symbol">)</a> <a id="2558" class="Symbol">{</a><a id="2559" href="Codata.Delay.html#2559" class="Bound">d</a><a id="2560" class="Symbol">}</a> <a id="2562" class="Symbol">→</a> <a id="2564" href="Codata.Delay.html#2559" class="Bound">d</a> <a id="2566" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a> <a id="2568" class="Symbol">→</a> <a id="2570" href="Codata.Delay.html#1236" class="Function">map</a> <a id="2574" href="Codata.Delay.html#2547" class="Bound">f</a> <a id="2576" href="Codata.Delay.html#2559" class="Bound">d</a> <a id="2578" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a>
 <a id="2581" href="Codata.Delay.html#2536" class="Function">map-⇓</a> <a id="2587" href="Codata.Delay.html#2587" class="Bound">f</a> <a id="2589" class="Symbol">(</a><a id="2590" href="Codata.Delay.html#2171" class="InductiveConstructor">now</a> <a id="2594" href="Codata.Delay.html#2594" class="Bound">a</a><a id="2595" class="Symbol">)</a>   <a id="2599" class="Symbol">=</a> <a id="2601" href="Codata.Delay.html#2171" class="InductiveConstructor">now</a> <a id="2605" class="Symbol">(</a><a id="2606" href="Codata.Delay.html#2587" class="Bound">f</a> <a id="2608" href="Codata.Delay.html#2594" class="Bound">a</a><a id="2609" class="Symbol">)</a>
 <a id="2612" href="Codata.Delay.html#2536" class="Function">map-⇓</a> <a id="2618" href="Codata.Delay.html#2618" class="Bound">f</a> <a id="2620" class="Symbol">(</a><a id="2621" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2627" href="Codata.Delay.html#2627" class="Bound">d</a><a id="2628" class="Symbol">)</a> <a id="2630" class="Symbol">=</a> <a id="2632" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2638" class="Symbol">(</a><a id="2639" href="Codata.Delay.html#2536" class="Function">map-⇓</a> <a id="2645" href="Codata.Delay.html#2618" class="Bound">f</a> <a id="2647" href="Codata.Delay.html#2627" class="Bound">d</a><a id="2648" class="Symbol">)</a>

 <a id="2652" href="Codata.Delay.html#2652" class="Function">bind-⇓</a> <a id="2659" class="Symbol">:</a> <a id="2661" class="Symbol">∀</a> <a id="2663" class="Symbol">{</a><a id="2664" href="Codata.Delay.html#2664" class="Bound">m</a><a id="2665" class="Symbol">}</a> <a id="2667" class="Symbol">(</a><a id="2668" href="Codata.Delay.html#2668" class="Bound">m⇓</a> <a id="2671" class="Symbol">:</a> <a id="2673" href="Codata.Delay.html#2664" class="Bound">m</a> <a id="2675" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a><a id="2676" class="Symbol">)</a> <a id="2678" class="Symbol">{</a><a id="2679" href="Codata.Delay.html#2679" class="Bound">f</a> <a id="2681" class="Symbol">:</a> <a id="2683" href="Codata.Delay.html#2504" class="Bound">A</a> <a id="2685" class="Symbol">→</a> <a id="2687" href="Codata.Delay.html#637" class="Datatype">Delay</a> <a id="2693" href="Codata.Delay.html#2516" class="Bound">B</a> <a id="2695" href="Agda.Builtin.Size.html#210" class="Postulate">∞</a><a id="2696" class="Symbol">}</a> <a id="2698" class="Symbol">→</a> <a id="2700" href="Codata.Delay.html#2679" class="Bound">f</a> <a id="2702" class="Symbol">(</a><a id="2703" href="Codata.Delay.html#2237" class="Function">extract</a> <a id="2711" href="Codata.Delay.html#2668" class="Bound">m⇓</a><a id="2713" class="Symbol">)</a> <a id="2715" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a> <a id="2717" class="Symbol">→</a> <a id="2719" href="Codata.Delay.html#1372" class="Function">bind</a> <a id="2724" href="Codata.Delay.html#2664" class="Bound">m</a> <a id="2726" href="Codata.Delay.html#2679" class="Bound">f</a> <a id="2728" href="Codata.Delay.html#2139" class="Datatype Operator">⇓</a>
 <a id="2731" href="Codata.Delay.html#2652" class="Function">bind-⇓</a> <a id="2738" class="Symbol">(</a><a id="2739" href="Codata.Delay.html#2171" class="InductiveConstructor">now</a> <a id="2743" href="Codata.Delay.html#2743" class="Bound">a</a><a id="2744" class="Symbol">)</a>   <a id="2748" href="Codata.Delay.html#2748" class="Bound">fa⇓</a> <a id="2752" class="Symbol">=</a> <a id="2754" href="Codata.Delay.html#2748" class="Bound">fa⇓</a>
 <a id="2759" href="Codata.Delay.html#2652" class="Function">bind-⇓</a> <a id="2766" class="Symbol">(</a><a id="2767" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2773" href="Codata.Delay.html#2773" class="Bound">p</a><a id="2774" class="Symbol">)</a> <a id="2776" href="Codata.Delay.html#2776" class="Bound">fa⇓</a> <a id="2780" class="Symbol">=</a> <a id="2782" href="Codata.Delay.html#2196" class="InductiveConstructor">later</a> <a id="2788" class="Symbol">(</a><a id="2789" href="Codata.Delay.html#2652" class="Function">bind-⇓</a> <a id="2796" href="Codata.Delay.html#2773" class="Bound">p</a> <a id="2798" href="Codata.Delay.html#2776" class="Bound">fa⇓</a><a id="2801" class="Symbol">)</a>
</pre></body></html>